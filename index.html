<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>DOMUS MAGI: REVELATIONS</title>
    
    <!-- LIBRERÍAS AR -->
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.2/dist/mindar-image-aframe.prod.js"></script>
    
    <!-- TU DISEÑO CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <!-- 1. VISOR SUPERIOR FIJO (33%) -->
    <div id="visor-superior">
        <!-- Aquí se procesa el video con el fondo transparente -->
        <canvas id="canvas-chroma" style="width:100%; height:100%;"></canvas>
        <!-- Video oculto que sirve de fuente para el canvas -->
        <video id="video-source" style="display:none;" playsinline loop crossorigin="anonymous"></video>
    </div>

    <!-- 2. HUD DE DATOS (HP Y PODER) -->
    <div id="hud">
        VITALITAS: <span id="hp-user">20</span> | RIVAL: <span id="rival-hp">20</span> | PODER MESA: <span id="pwr-total">0</span>
    </div>

    <!-- 3. ESCENA DE CÁMARA (CENTRO) -->
    <!-- Se cambió targets.mind por targets1.mind -->
    <a-scene id="escena-ar" 
        mindar-image="imageTargetSrc: ./targets1.mind; autoStart: true; uiLoading: no; maxTrack: 2;" 
        vr-mode-ui="enabled: false" 
        device-orientation-permission-ui="enabled: false">
        
        <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
        
        <!-- DETECTORES PARA LAS 4 CASAS (Solapas) -->
        <a-entity id="target0" class="target-card" mindar-image-target="targetIndex: 0"></a-entity>
        <a-entity id="target1" class="target-card" mindar-image-target="targetIndex: 1"></a-entity>
        <a-entity id="target2" class="target-card" mindar-image-target="targetIndex: 2"></a-entity>
        <a-entity id="target3" class="target-card" mindar-image-target="targetIndex: 3"></a-entity>
    </a-scene>

    <!-- 4. MANDO DE CONTROL (BOTONES I, T, A, M) -->
    <div id="controles">
        <button id="btn-impetus" class="btn impetus" onclick="ejecutar('ataque')">I</button>
        <button id="btn-tutela" class="btn tutela" onclick="ejecutar('defensa')">T</button>
        <button id="btn-auxilium" class="btn auxilium" onclick="ejecutar('cura')">A</button>
        <button id="btn-mysterium" class="btn mysterium" onclick="ejecutar('magia')">M</button>
    </div>

    <!-- TUS ARCHIVOS DE LÓGICA -->
    <script src="logica_juego.js"></script>
    <script src="logica_video.js"></script>

</body>
</html>